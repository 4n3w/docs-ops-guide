---
title: CA Single Sign-On Configuration for Pivotal Cloud Foundry
owner: Identity
---
## Overview 

This topic explains how to configure single sign-on (SSO) between CA and Pivotal Cloud Foundry (PCF).

The partnership creation for each partner involves the following steps:
1. Installing and configuring the prerequisites
1. Configuring CA Single Sign-On as an Identity Provider
1. Configuring the Service Provider

## Prerequisites

1. CA Single Sign-On v12.52 installation
1. User store and Session store configuration
1. Creation of Signed Certificate by a Certificate Authority
1. Protect Identity Provider URL with CA SSO by creating the following objects:
	* Authentication scheme
	* Domain
	* Realm
	* Rules and policy
1. PCF Environment at https://console.SYSTEM-DOMAIN
<p class="note"><strong>Note: </strong> Replace SYSTEM-DOMAIN with the name of your PCF installation. </p>

## <a id='pcf'></a>Configuring CA as the SAML 2.0 Identity Provider on PCF 
1. Follow the steps in [Configuring Authentication and Enterprise SSO for Elastic Runtime](./auth-sso.html#configure-pcf-for-saml) to set the identity provider metadata on PCF. 
1. Download the service provider metadata using the `https://login.SYSTEM-DOMAIN/saml/metadata` URL.
	1. Navigate `https://login.YOUR-SYSTEM-DOMAIN/saml/metadata` and log in to CA SSO.
	1. Navigate to **Federation**.
	1. Select **Partnership Federation**
	1. In the Actions menu, select **Export Metadata**.
	1. Save the exported metadata in an XML file.
1. Paste the contents of the XML file into the **Identity Provider Metadata** field. 
1. Click **Save** and click **Apply Changes**.

## <a id='ca-sso'></a>Configuring PCF as the SAML 2.0 Service Provider on CA Single Sign-On

## Configure Identity Provider and Service Provider Entities 
1. Navigate to `https://login.YOUR-SYSTEM-DOMAIN/` and log in to CA SSO.
1. Navigate to **Federation**.
1. Select **Partnership Federation**.
1. Select **Entity**.
1. Select **Create Entity**.
1. To create a local entity, use the values below:
	* **Entity Location**: Local
	* **Entity Type**: SAML2 IDP
	* **Entity ID**: Enter an ID for your local identity provider. For example, `https://ca-technologies.xxx.com`. 
	* **Entity Name**: Create a name for your local identity provider.
	* **Base URL**: Enter the fully-qualified domain name for the host service CA SSO Federation Web Services.
	* **Signing Private Key Alias**: Select the private key alias or import or import a private key. 
	* **Signed Authentication Requests Required**: Select **No**. 
	* **Supported NameID format**: Enter `urn:oasis:names:tc:SAML:1.1:nameid-format:emailAddress` and `urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified` to select both email address and unspecified as supported NameID formats.
1. To create a remote entity, click **Import Metadata Button** and complete the steps below:
	1. Download the service provider metadata from https://login.{systemdomain}/saml/metadata and save to an XML file. 
	1. Browse and select the saved XML Metadata you downloaded in the previous step. 
	1. Provide a name for the Remote Service Provider Entity.
	1. Provide an alias for the Signing Certificate imported from the Metadata. 
	<p class="note"><strong>Note: </strong> PCF signs the outgoing SAML authentication requests. </p>
	1. Click **Save**

## Configure Partnership Between CA SSO and PCF

1. Navigate to `https://login.YOUR-SYSTEM-DOMAIN/` and log in to CA SSO.
1. Navigate to **Federation**.
1. Select **Partnership Federation**.
1. Click **Create Partnership**.
1. To configure the partnership, use the values below to fill out the fields:
	* **Add Partnership Name**: Enter a name for your partnership. 
	* (optional) **Description**: Enter a relevant description for your partnership.
	* **Local IPD ID**: Enter the Local Service Provider ID you created in the [Remote Entity Creation]() section.
	* **Remote SP ID**: Enter the Remote SP ID you created in the [Remote Entity Creation]() section.
	* **Base URL**: This field will be pre-populated. 
	* **Skew Time**: Enter any skew time required by your environment.
	* **User Directories and Search Order**: Select the required directories in the required search order.
1. Click **Next**
1. On the Federation Users page, accept the default values.
1. Click **Next**.
1. To complete the Name ID Format section:
	1. Select **Email Address** from the Name ID Format drop-down menu.
	1. Select **User Attribute** from the Name ID Type drop-down menu. 
	
<p class="note"><strong>Note: </strong> PCF does not support processing SAML Assertion Attributes at this time. You can skip filling out the Assertion Attributes fields. </p>

1. Click **Next**.
1. To complete the SSO and SLO section:
	1. Enter the Authentication URL that is protected by CA SSO under prerequisites.
	1. For SSO Binding, click **HTTP-POST**.
	1. In the Audience field, enter http://login.YOUR-SYSTEM-DOMAIN.
	1. Select **Both IDP and DP Initiated** from the Transactions Allowed drop-down menu. 
	1. The Assertion Consumer Service URL field will be pre-populated using information from the service provider entity. 
1. Click **Next**. 
1. To complete the Configure Signature and Encryption section:
	1. In the **Signing Private Key Alias** drop-down menu, verify that the correct Private Key Alias is selected. 
	1. Verify that the correct Verification Certificate Alias is selected in the **Verification Certificate Analysis** drop-down menu. This alias should be the same certificate created when you import the <a href="#ca-sso">Remote Service Provider Entity ID</a>.
	1. Select **Sign Both** from the Post Signature Options drop-down menu. 
	<p class="note"><strong>Note: </strong> PCF does not support encryption options at this time. </p>
	1. Click **Finish**.
1. To activate the partnership, expand the Action drop-down menu for your partnership and click **Activate**.